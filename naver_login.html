<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>

  <script type="text/javascript" src="https://static.nid.naver.com/js/naverLogin_implicit-1.0.3.js"
    charset="utf-8"></script>
  <script type="text/javascript" src="http://code.jquery.com/jquery-1.11.3.min.js"></script>

  <script src="js/sessionStorage.js"></script>
  <script src="js/main.js"></script>
  <script src="js/cookie.js"></script>


</head>

<body>
  <script type="text/javascript">

    var naver_id_login = new naver_id_login("1unGrvjvJKXzMl8aMUwR", "http://127.0.0.1:5500/naver_login.html");
    // 접근 토큰 값 출력

    // 네이버 사용자 프로필 조회
    naver_id_login.get_naver_userprofile("naverSignInCallback()");

    // 네이버 사용자 프로필 조회 이후 프로필 정보를 처리할 callback function
    function naverSignInCallback() {
      const email = naver_id_login.getProfileData('email');
      const nickname = naver_id_login.getProfileData('nickname');
      const name = naver_id_login.getProfileData('name');
      const age = naver_id_login.getProfileData('age');
      const gender = naver_id_login.getProfileData('gender');
      const birthday = naver_id_login.getProfileData('birthday');
      const mobile = naver_id_login.getProfileData('mobile');

      // 네이버 로그인 성공시 쿠키 생성
      /*
      // 로컬 값 생성 
      const signupSave = {
        id: email,
        userName: name,
      };

      let localData = signupData_sns();
      localStorage.setItem("signup_" + localData, JSON.stringify(signupSave));
      */

      setCookie("idsave", email , 30); // 쿠키 값 생성 (로그인 된 것을 확인하기 위함)
      
      alert('로그인 되었습니다.');
      close();
      opener.location.href = 'main_page_login.html';  

    }

  






  </script>


</body>

</html>